<div class="container">
    <br><br><br><br>

    <h2>{{ isEditMode ? 'Edit' : 'Create' }} Job Offer</h2>
  
    <div *ngIf="loading" class="d-flex justify-content-center">
      <div class="spinner-border" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
    </div>
  
    <div *ngIf="error" class="alert alert-danger">
      {{ error }}
    </div>
  
    <form [formGroup]="jobOfferForm" (ngSubmit)="onSubmit()">
      <div class="mb-3">
        <label for="title" class="form-label">Title</label>
        <input 
          type="text" 
          class="form-control" 
          id="title" 
          formControlName="title"
          [ngClass]="{'is-invalid': jobOfferForm.get('title')?.invalid && jobOfferForm.get('title')?.touched}"
        >
        <div *ngIf="jobOfferForm.get('title')?.invalid && jobOfferForm.get('title')?.touched" class="invalid-feedback">
          Title is required
        </div>
      </div>
  
      <div class="mb-3">
        <label for="type" class="form-label">Job Type</label>
        <select 
          class="form-select" 
          id="type" 
          formControlName="type"
          [ngClass]="{'is-invalid': jobOfferForm.get('type')?.invalid && jobOfferForm.get('type')?.touched}"
        >
          <option value="">Select job type</option>
          <option value="Full-time">Full-time</option>
          <option value="Part-time">Part-time</option>
          <option value="Contract">Contract</option>
          <option value="Freelance">Freelance</option>
          <option value="Internship">Internship</option>
        </select>
        <div *ngIf="jobOfferForm.get('type')?.invalid && jobOfferForm.get('type')?.touched" class="invalid-feedback">
          Job type is required
        </div>
      </div>
  
      <div class="row">
        <div class="col-md-6 mb-3">
          <label for="location" class="form-label">Location</label>
          <input 
            type="text" 
            class="form-control" 
            id="location" 
            formControlName="location"
            [ngClass]="{'is-invalid': jobOfferForm.get('location')?.invalid && jobOfferForm.get('location')?.touched}"
          >
          <div *ngIf="jobOfferForm.get('location')?.invalid && jobOfferForm.get('location')?.touched" class="invalid-feedback">
            Location is required
          </div>
        </div>
        <div class="col-md-6 mb-3">
          <label for="region" class="form-label">Region</label>
          <input 
            type="text" 
            class="form-control" 
            id="region" 
            formControlName="region"
            [ngClass]="{'is-invalid': jobOfferForm.get('region')?.invalid && jobOfferForm.get('region')?.touched}"
          >
          <div *ngIf="jobOfferForm.get('region')?.invalid && jobOfferForm.get('region')?.touched" class="invalid-feedback">
            Region is required
          </div>
        </div>
      </div>
  
      <div class="mb-3">
        <label for="description" class="form-label">Description</label>
        <textarea 
          class="form-control" 
          id="description" 
          rows="5" 
          formControlName="description"
          [ngClass]="{'is-invalid': jobOfferForm.get('description')?.invalid && jobOfferForm.get('description')?.touched}"
        ></textarea>
        <div *ngIf="jobOfferForm.get('description')?.invalid && jobOfferForm.get('description')?.touched" class="invalid-feedback">
          Description is required
        </div>
      </div>
  
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input 
          type="email" 
          class="form-control" 
          id="email" 
          formControlName="email"
          [ngClass]="{'is-invalid': jobOfferForm.get('email')?.invalid && jobOfferForm.get('email')?.touched}"
        >
        <div *ngIf="jobOfferForm.get('email')?.invalid && jobOfferForm.get('email')?.touched" class="invalid-feedback">
          <span *ngIf="jobOfferForm.get('email')?.errors?.['required']">Email is required</span>
          <span *ngIf="jobOfferForm.get('email')?.errors?.['email']">Please enter a valid email</span>
        </div>
      </div>
  
       <div class="mb-3">
        <label for="image" class="form-label">Image URL</label>
        <input 
          type="text" 
          class="form-control" 
          id="image" 
          formControlName="image"
        >
        <small class="form-text text-muted">Enter a URL for an image to represent this job offer</small>
      </div> 
  
      <div class="d-flex gap-2 mt-4">
        <button type="submit" class="btn btn-primary" [disabled]="jobOfferForm.invalid || loading">
          {{ isEditMode ? 'Update' : 'Create' }} Job Offer
        </button>
        <button type="button" class="btn btn-secondary" (click)="cancel()">Cancel</button>
      </div>
    </form>
  </div>